<!DOCTYPE html>
<html>
<head>
  <title>Florist App - Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<<<<<<< Updated upstream
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js"></script>
  <style>
    body { padding-top: 70px; }
    .product-card { border: 1px solid #ddd; border-radius: 8px; padding: 10px; text-align: center; cursor: pointer; }
    .nav-bottom { position: fixed; bottom: 0; left: 0; width: 100%; border-top: 1px solid #ccc; background: #fff; }
    .nav-bottom a { flex: 1; text-align: center; padding: 10px; text-decoration: none; color: #000; }
    .dropdown-menu { left: 0; right: auto; }
=======
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --primary-color: #ff6b9d;
      --secondary-color: #c44569;
      --accent-color: #f8b500;
      --success-color: #00d084;
      --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --card-shadow: 0 8px 25px rgba(0,0,0,0.1);
      --hover-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }

    body { 
      padding-top: 80px; 
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .navbar {
      background: rgba(255, 255, 255, 0.95) !important;
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 107, 157, 0.1);
      height: 80px;
    }

    .store-name {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary-color);
      text-decoration: none;
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .store-name:hover {
      color: var(--secondary-color);
      -webkit-text-fill-color: var(--secondary-color);
    }

    .product-card { 
      border: none;
      border-radius: 20px; 
      padding: 20px; 
      text-align: center; 
      cursor: pointer; 
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      height: 100%;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      box-shadow: var(--card-shadow);
      position: relative;
      overflow: hidden;
      transform: translateY(0);
    }

    .product-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 107, 157, 0.1), transparent);
      transition: left 0.6s ease;
    }

    .product-card:hover::before {
      left: 100%;
    }

    .product-card:hover {
      transform: translateY(-15px) scale(1.03);
      box-shadow: var(--hover-shadow);
      border: 1px solid var(--primary-color);
    }

    .product-card.animate-in {
      animation: slideInUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .nav-bottom { 
      position: fixed; 
      bottom: 0; 
      left: 0; 
      width: 100%; 
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255, 107, 157, 0.1);
      z-index: 1000;
      padding: 10px 0;
    }

    .nav-bottom a { 
      flex: 1; 
      text-align: center; 
      padding: 15px; 
      text-decoration: none; 
      color: #666; 
      font-size: 0.9rem;
      transition: all 0.3s ease;
      border-radius: 15px;
      margin: 0 5px;
    }

    .nav-bottom a:hover {
      color: var(--primary-color);
      background: rgba(255, 107, 157, 0.1);
      transform: translateY(-2px);
    }

    .profile-icon { 
      font-size: 1.8rem; 
      cursor: pointer; 
      text-decoration: none;
      color: var(--primary-color);
      transition: all 0.3s ease;
      padding: 10px;
      border-radius: 50%;
    }

    .profile-icon:hover {
      color: var(--secondary-color);
      background: rgba(255, 107, 157, 0.1);
      transform: scale(1.1);
    }

    .btn-custom {
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 25px;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
    }

    .btn-custom:hover {
      background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
    }

    .product-img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      border-radius: 15px;
      margin-bottom: 15px;
      transition: all 0.4s ease;
    }

    .product-card:hover .product-img {
      transform: scale(1.1);
    }

    .price-tag {
      font-weight: bold;
      color: var(--success-color);
      font-size: 1.4rem;
      background: linear-gradient(135deg, rgba(0, 208, 132, 0.1), rgba(0, 208, 132, 0.2));
      padding: 10px 20px;
      border-radius: 25px;
      display: inline-block;
      margin: 15px 0;
      border: 2px solid rgba(0, 208, 132, 0.2);
    }

    .search-section {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      padding: 30px 0;
      margin: 20px 0 40px 0;
      border-radius: 30px;
      box-shadow: var(--card-shadow);
    }

    .form-control {
      border: 2px solid transparent;
      border-radius: 25px;
      padding: 15px 25px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      font-size: 1.1rem;
    }

    .form-control:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(255, 107, 157, 0.25);
      background: white;
    }

    .container { margin-bottom: 100px; }

    .btn-cart {
      background: linear-gradient(45deg, var(--accent-color), #ffa726);
      color: white;
      border: none;
      border-radius: 25px;
      padding: 12px 25px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(248, 181, 0, 0.3);
      font-weight: 600;
    }

    .btn-cart:hover {
      background: linear-gradient(45deg, #ffa726, var(--accent-color));
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(248, 181, 0, 0.4);
    }

    .modal-content {
      border: none;
      border-radius: 20px;
      box-shadow: var(--hover-shadow);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
    }

    .modal-header {
      background: var(--gradient-bg);
      color: white;
      border-radius: 20px 20px 0 0;
      border-bottom: none;
    }

    .badge {
      background: var(--primary-color) !important;
      border-radius: 50%;
      font-size: 0.7rem;
      position: absolute;
      top: -5px;
      right: -5px;
    }

    .loading-spinner {
      display: inline-block;
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255, 107, 157, 0.3);
      border-radius: 50%;
      border-top-color: var(--primary-color);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .product-title {
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 15px;
      font-size: 1.2rem;
      line-height: 1.3;
    }

    .product-desc {
      color: #7f8c8d;
      font-size: 0.95rem;
      line-height: 1.5;
      margin-bottom: 15px;
    }

    .section-title {
      color: #2c3e50;
      font-weight: 700;
      position: relative;
      display: inline-block;
      margin-bottom: 50px;
      font-size: 2.2rem;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: var(--gradient-bg);
      border-radius: 2px;
    }

    .alert-error {
      background: rgba(231, 76, 60, 0.1);
      border: 1px solid rgba(231, 76, 60, 0.3);
      color: #c0392b;
      border-radius: 15px;
      padding: 30px;
    }

    .alert-success {
      background: rgba(0, 208, 132, 0.1);
      border: 1px solid rgba(0, 208, 132, 0.3);
      color: #00a085;
      border-radius: 15px;
      padding: 30px;
    }

    .rating {
      color: #ffa500;
      font-size: 0.9rem;
    }

    .product-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      background: var(--gradient-bg);
      color: white;
      padding: 5px 12px;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: 600;
      z-index: 2;
    }

    /* Enhanced animations */
    .fade-in {
      animation: fadeInUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(40px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* Responsive improvements */
    @media (max-width: 768px) {
      .product-img {
        height: 200px;
      }
      
      .search-section {
        padding: 20px 0;
        margin: 15px 0 25px 0;
      }
      
      .modal-dialog {
        margin: 1rem;
      }

      .store-name {
        font-size: 1.5rem;
      }

      .section-title {
        font-size: 1.8rem;
      }
    }

    /* Loading state improvements */
    .loading-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 400px;
    }

    .loading-text {
      margin-top: 20px;
      color: #7f8c8d;
      font-size: 1.1rem;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
>>>>>>> Stashed changes
  </style>
</head>
<body>
  <!-- Header -->
<<<<<<< Updated upstream
  <nav class="navbar fixed-top bg-light px-3 d-flex justify-content-between align-items-center">
    <!-- Profile Dropdown -->
    <div class="dropdown">
      <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="profileMenu" data-bs-toggle="dropdown" aria-expanded="false">
        Profil
      </button>
      <ul class="dropdown-menu" aria-labelledby="profileMenu">
        <li><span class="dropdown-item-text" id="username">Halo, User</span></li>
        <li><button class="dropdown-item text-danger" id="logoutBtn">Logout</button></li>
      </ul>
    </div>

    <!-- Search -->
    <form class="d-flex mx-2 flex-grow-1">
      <input class="form-control" type="search" placeholder="Cari bunga..." aria-label="Search">
    </form>

    <!-- Cart -->
    <a href="/cart" class="btn btn-outline-primary">
      🛒
    </a>
  </nav>

  <!-- Main Content -->
  <div class="container mt-4">
    <div class="row" id="productGrid">
      <!-- Produk contoh -->
      <div class="col-md-4 mb-3">
        <div class="product-card">
          <img src="https://via.placeholder.com/150" class="img-fluid mb-2">
          <h5>Bunga Mawar</h5>
          <p>Rp 50.000</p>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <div class="product-card">
          <img src="https://via.placeholder.com/150" class="img-fluid mb-2">
          <h5>Bunga Tulip</h5>
          <p>Rp 70.000</p>
=======
  <nav class="navbar fixed-top shadow-sm px-4 d-flex justify-content-between align-items-center">
    <!-- Kiri: Profil -->
    <a href="/profile" class="profile-icon">
      <i class="fas fa-user-circle"></i>
      <span class="d-none d-md-inline ms-2" style="font-size: 1rem;">Profile</span>
    </a>

    <!-- Tengah: Nama Toko -->
    <div class="text-center flex-grow-1">
      <h1 class="store-name mb-0">Gunawan Florist</h1>
    </div>

    <!-- Kanan: Cart -->
    <div style="position: relative;">
      <a href="#" onclick="goToCart()" class="btn btn-cart">
        <i class="fas fa-shopping-bag me-1"></i>
        <span class="d-none d-md-inline">Cart</span>
        <span id="cartCount" class="badge">0</span>
      </a>
    </div>
  </nav>

  <!-- Search Section -->
  <div class="container mt-4">
    <div class="search-section">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="input-group input-group-lg">
            <input id="mainSearch" class="form-control" type="search" placeholder="Cari bunga impian Anda...">
            <button class="btn btn-custom" type="button" onclick="performSearch()">
              <i class="fas fa-search me-2"></i>Cari
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container">
    <h2 class="section-title text-center d-block w-100">
      <i class="fas fa-seedling me-3"></i>Koleksi Bunga Premium
    </h2>
    <div class="row" id="productGrid">
      <!-- Loading state -->
      <div class="col-12">
        <div class="loading-container">
          <div class="loading-spinner"></div>
          <p class="loading-text">Memuat koleksi bunga terbaik untuk Anda...</p>
>>>>>>> Stashed changes
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Nav -->
  <div class="nav-bottom d-flex">
<<<<<<< Updated upstream
    <a href="/home">🏠 Home</a>
    <a href="/history">🕑 History</a>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "<YOUR_API_KEY>",
      authDomain: "<YOUR_AUTH_DOMAIN>",
      projectId: "<YOUR_PROJECT_ID>",
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Tampilkan username kalau login
    auth.onAuthStateChanged(user => {
      if (user) {
        document.getElementById("username").innerText = "Halo " + user.email;
      } else {
        window.location.href = "/login"; // belum login → ke login
      }
    });

    // Logout → balik ke login
    document.getElementById("logoutBtn").addEventListener("click", (e) => {
      e.preventDefault(); // cegah reload/submit form
      auth.signOut().then(() => {
        window.location.href = "/login"; // paksa redirect
      }).catch(err => {
        console.error("Logout error:", err);
      });
    });
=======
    <a href="#" onclick="goToHome()">
      <i class="fas fa-home d-block mb-1"></i>
      <small>Home</small>
    </a>
    <a href="#" onclick="goToHistory()">
      <i class="fas fa-history d-block mb-1"></i>
      <small>History</small>
    </a>
  </div>

  <!-- Modal Produk -->
  <div class="modal fade" id="productModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalName">
            <i class="fas fa-flower me-2"></i>
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body text-center p-4">
          <img id="modalImg" src="" class="img-fluid rounded-3 mb-4" style="max-height: 400px; box-shadow: var(--card-shadow);">
          <p id="modalDesc" class="text-muted fs-6 mb-4"></p>
          <div class="d-flex justify-content-center align-items-center mb-4">
            <h3 class="price-tag mb-0" id="modalPrice"></h3>
          </div>
        </div>
        <div class="modal-footer justify-content-center border-0">
          <button type="button" class="btn btn-outline-secondary me-3" data-bs-dismiss="modal">
            <i class="fas fa-times me-2"></i>Tutup
          </button>
          <button class="btn btn-custom btn-lg" id="addToCartBtn">
            <i class="fas fa-cart-plus me-2"></i>Tambahkan ke Keranjang
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Toast -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="successToast" class="toast" role="alert">
      <div class="toast-header bg-success text-white">
        <i class="fas fa-check-circle me-2"></i>
        <strong class="me-auto">Berhasil!</strong>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
      </div>
      <div class="toast-body" id="toastMessage">
        Produk berhasil ditambahkan ke keranjang!
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Firebase SDK v9 (modular) -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js';
    import { getFirestore, collection, getDocs, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js';
    import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js';

    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBgSh39-LZUjqwisirJNPF1EIMcRvp_F48",
      authDomain: "florist-app-70c3d.firebaseapp.com",
      projectId: "florist-app-70c3d",
      storageBucket: "florist-app-70c3d.firebasestorage.app",
      messagingSenderId: "692096916407",
      appId: "1:692096916407:web:d6a76e5fa2d6c699e2e632"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    // Global variables
    let currentProducts = [];
    let allProducts = [];
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // Make functions globally accessible
    window.showProductModal = showProductModal;
    window.goToCart = goToCart;
    window.goToHome = goToHome;
    window.goToHistory = goToHistory;
    window.performSearch = performSearch;

    // Update cart count
    function updateCartCount() {
      document.getElementById("cartCount").textContent = cart.length;
    }

    // Show success toast
    function showSuccessToast(message) {
      document.getElementById("toastMessage").textContent = message;
      const toast = new bootstrap.Toast(document.getElementById("successToast"));
      toast.show();
    }

    // Load products from Firestore
    async function loadProductsFromFirestore() {
      const productGrid = document.getElementById("productGrid");
      
      try {
        console.log("Loading products from Firestore...");
        
        // Real-time listener for products collection
        const unsubscribe = onSnapshot(collection(db, "produk"), (querySnapshot) => {
        allProducts = [];

        querySnapshot.forEach((doc) => {
          const data = doc.data();
          console.log("Product data:", doc.id, data);

          allProducts.push({
            id: doc.id, // Nama produk dari document ID
            name: doc.id,
            price: parseInt(data.Harga) || 0,
            description: data.Deskripsi || 'Deskripsi tidak tersedia',
            image: data.Gambar || 'https://via.placeholder.com/400x300?text=No+Image'
          });
        });

        console.log("Total products loaded:", allProducts.length);
        currentProducts = [...allProducts];
        renderProducts(currentProducts);
          
        }, (error) => {
          console.error("Error listening to products: ", error);
          showErrorState("Gagal memuat produk dari database");
        });

      } catch (error) {
        console.error("Error initializing Firestore: ", error);
        showErrorState("Tidak dapat terhubung ke database");
      }
    }

    // Show error state
    function showErrorState(message) {
      const productGrid = document.getElementById("productGrid");
      productGrid.innerHTML = `
        <div class="col-12 text-center py-5">
          <div class="alert-error">
            <i class="fas fa-exclamation-triangle mb-3" style="font-size: 3rem;"></i>
            <h5>Terjadi Kesalahan</h5>
            <p class="mb-3">${message}</p>
            <button class="btn btn-custom" onclick="location.reload()">
              <i class="fas fa-refresh me-2"></i>Coba Lagi
            </button>
          </div>
        </div>
      `;
    }

    // Render products with enhanced animations
    function renderProducts(products) {
      const productGrid = document.getElementById("productGrid");
      productGrid.innerHTML = "";
      
      if (products.length === 0) {
        productGrid.innerHTML = `
          <div class="col-12 text-center py-5">
            <div class="alert-error">
              <i class="fas fa-search mb-3" style="font-size: 3rem;"></i>
              <h5>Tidak ada produk ditemukan</h5>
              <p class="mb-0">Coba gunakan kata kunci pencarian yang berbeda atau refresh halaman</p>
            </div>
          </div>
        `;
        return;
      }
      
      products.forEach((product, index) => {
        const col = document.createElement("div");
        col.className = "col-xl-4 col-lg-6 col-md-6 mb-4";
        col.style.animationDelay = `${index * 0.1}s`;
        col.innerHTML = `
          <div class="product-card h-100 animate-in" onclick="showProductModal('${product.id}')">
            <div class="product-badge">Premium</div>
            <img src="${product.image}" 
                 class="product-img" 
                 alt="${product.name}" 
                 onerror="this.src='https://via.placeholder.com/400x300/ff6b9d/ffffff?text=Bunga'">
            <h5 class="product-title">${product.name}</h5>
            <div class="price-tag">Rp ${product.price.toLocaleString('id-ID')}</div>
            <p class="product-desc">${product.description.length > 100 ? product.description.substring(0, 100) + '...' : product.description}</p>
            <div class="mt-auto">
              <div class="rating mb-2">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <span class="ms-1">(4.9)</span>
              </div>
              <small class="text-success">
                <i class="fas fa-shipping-fast me-1"></i>Pengiriman Cepat
              </small>
            </div>
          </div>
        `;
        productGrid.appendChild(col);
      });
    }

    // Show product modal
    function showProductModal(productId) {
      const product = allProducts.find(p => p.id === productId);
      if (!product) return;

      document.getElementById("modalName").innerHTML = `<i class="fas fa-flower me-2"></i>${product.name}`;
      document.getElementById("modalDesc").textContent = product.description;
      document.getElementById("modalPrice").textContent = `Rp ${product.price.toLocaleString('id-ID')}`;
      document.getElementById("modalImg").src = product.image;

      // Add to cart functionality
      document.getElementById("addToCartBtn").onclick = () => {
        const existingItem = cart.find(item => item.id === product.id);
        if (existingItem) {
          existingItem.quantity = (existingItem.quantity || 1) + 1;
        } else {
          cart.push({
            id: product.id,
            name: product.name,
            price: product.price,
            image: product.image,
            quantity: 1
          });
        }
        
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCount();
        showSuccessToast(`${product.name} berhasil ditambahkan ke keranjang!`);
        bootstrap.Modal.getInstance(document.getElementById("productModal")).hide();
      };

      new bootstrap.Modal(document.getElementById("productModal")).show();
    }

    // Search functionality
    function performSearch() {
      const keyword = document.getElementById("mainSearch").value.toLowerCase().trim();
      filterProducts(keyword);
    }

    function filterProducts(keyword) {
      if (!keyword) {
        currentProducts = [...allProducts];
      } else {
        currentProducts = allProducts.filter(product => 
          product.name.toLowerCase().includes(keyword) ||
          product.description.toLowerCase().includes(keyword)
        );
      }
      renderProducts(currentProducts);
    }

    // Navigation functions
    function goToCart() {
      if (cart.length === 0) {
        alert("Keranjang Anda masih kosong! Silakan pilih bunga terlebih dahulu.");
      } else {
        alert(`Anda memiliki ${cart.length} jenis item di keranjang. Halaman cart akan segera tersedia!`);
      }
    }

    function goToHome() {
      window.location.reload();
    }

    function goToHistory() {
      alert("Fitur riwayat pembelian akan segera tersedia!");
    }

    // Event listeners
    document.getElementById("mainSearch").addEventListener("input", (e) => {
      const keyword = e.target.value.toLowerCase().trim();
      if (keyword === '') {
        currentProducts = [...allProducts];
        renderProducts(currentProducts);
      }
    });

    // Enter key support for search
    document.getElementById("mainSearch").addEventListener("keypress", (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        performSearch();
      }
    });

    // Initialize page
    document.addEventListener("DOMContentLoaded", () => {
      updateCartCount();
      loadProductsFromFirestore();
    });

    // Authentication state listener
    onAuthStateChanged(auth, (user) => {
      if (user) {
        console.log("User logged in:", user.email);
      } else {
        console.log("No user logged in");
      }
    });

>>>>>>> Stashed changes
  </script>
</body>
</html>