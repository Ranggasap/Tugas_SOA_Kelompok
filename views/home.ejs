<!DOCTYPE html>
<html>
<head>
  <title>Florist App - Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js"></script>
  <style>
    body { padding-top: 70px; }
    .product-card { border: 1px solid #ddd; border-radius: 8px; padding: 10px; text-align: center; cursor: pointer; }
    .nav-bottom { position: fixed; bottom: 0; left: 0; width: 100%; border-top: 1px solid #ccc; background: #fff; }
    .nav-bottom a { flex: 1; text-align: center; padding: 10px; text-decoration: none; color: #000; }
    .dropdown-menu { left: 0; right: auto; }
  </style>
</head>
<body>
  <!-- Header -->
  <nav class="navbar fixed-top bg-light px-3 d-flex justify-content-between align-items-center">
    <!-- Profile Dropdown -->
    <div class="dropdown">
      <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="profileMenu" data-bs-toggle="dropdown" aria-expanded="false">
        Profil
      </button>
      <ul class="dropdown-menu" aria-labelledby="profileMenu">
        <li><span class="dropdown-item-text" id="username">Halo, User</span></li>
        <li><button class="dropdown-item text-danger" id="logoutBtn">Logout</button></li>
      </ul>
    </div>

    <!-- Search -->
    <form class="d-flex mx-2 flex-grow-1">
      <input class="form-control" type="search" placeholder="Cari bunga..." aria-label="Search">
    </form>

    <!-- Cart -->
    <a href="/cart" class="btn btn-outline-primary">
      üõí
    </a>
  </nav>

  <!-- Main Content -->
  <div class="container mt-4">
    <div class="row" id="productGrid">
      <!-- Produk contoh -->
      <div class="col-md-4 mb-3">
        <div class="product-card">
          <img src="https://via.placeholder.com/150" class="img-fluid mb-2">
          <h5>Bunga Mawar</h5>
          <p>Rp 50.000</p>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <div class="product-card">
          <img src="https://via.placeholder.com/150" class="img-fluid mb-2">
          <h5>Bunga Tulip</h5>
          <p>Rp 70.000</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Nav -->
  <div class="nav-bottom d-flex">
    <a href="/home">üè† Home</a>
    <a href="/history">üïë History</a>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "<YOUR_API_KEY>",
      authDomain: "<YOUR_AUTH_DOMAIN>",
      projectId: "<YOUR_PROJECT_ID>",
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Tampilkan username kalau login
    auth.onAuthStateChanged(user => {
      if (user) {
        document.getElementById("username").innerText = "Halo " + user.email;
      } else {
        window.location.href = "/login"; // belum login ‚Üí ke login
      }
    });

    // Logout ‚Üí balik ke login
    document.getElementById("logoutBtn").addEventListener("click", (e) => {
      e.preventDefault(); // cegah reload/submit form
      auth.signOut().then(() => {
        window.location.href = "/login"; // paksa redirect
      }).catch(err => {
        console.error("Logout error:", err);
      });
    });
  </script>
</body>
</html>
